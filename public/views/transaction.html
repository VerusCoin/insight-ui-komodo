<div data-ng-include src="'views/includes/connection.html'"></div>
<section data-ng-controller="transactionsController" data-ng-init="findThis()">
  <div style="max-width: 1400px; margin: 0 auto; padding: 0;">
    <div data-ng-if="!tx.txid">
      <div class="progress progress-striped active">
        <div class="progress-bar progress-bar-info" style="width: 100%">
          <span translate>Loading Transaction Details</span> <span class="loader-gif"></span>
        </div>
      </div>
    </div>
    
    <div data-ng-if="tx.txid">
      <!-- Transaction ID -->
      <div style="background: #fff; border: 1px solid #e7eaf3; border-radius: 4px; padding: 8px 12px; margin: 5px; font-size: 13px;">
        <strong translate style="color: #000;">Transaction:</strong> 
        <span style="font-family: monospace; color: #333; margin-left: 8px; font-size: 13px;">{{tx.txid}}</span>
        <span class="btn-copy" clip-copy="tx.txid" style="margin-left: 8px;"></span>
        <a href="api/detailedtx/{{tx.txid}}" target="_blank" style="margin-left: 8px; text-decoration: none;">
          <span style="display: inline-block; width: 18px; height: 18px; background-color: #000; border-radius: 50%; text-align: center; line-height: 18px; font-size: 12px; font-weight: bold; color: #fff; cursor: pointer; vertical-align: middle;" title="View API JSON">i</span>
        </a>
      </div>
      <!-- Compact Header -->
      <div style="margin: 0 5px 2px 5px;">
        <h4 style="margin: 0 0 4px 0; font-size: 14px;"><span translate>Transaction Details</span></h4>
        <div style="background: #f8f9fa; border: 1px solid #e7eaf3; border-radius: 4px; padding: 6px;">
          <div style="display: flex; flex-wrap: wrap; gap: 15px; font-size: 12px;">
            <div>
              <span style="color: #6c757d;"><strong translate>Status:</strong></span>
              <span data-ng-show="tx.confirmations" style="color: #28a745; margin-left: 8px;">
                <span class="glyphicon glyphicon-ok-circle"></span> {{tx.confirmations}} <span translate>Confirmations</span>
              </span>
              <span data-ng-show="!tx.confirmations" style="color: #ffc107; margin-left: 8px;">
                <span class="glyphicon glyphicon-time"></span> <span translate>Unconfirmed</span>
              </span>
            </div>
            <div data-ng-show="tx.blockhash">
              <span style="color: #6c757d;"><strong translate>Block:</strong></span>
              <a href="block/{{tx.blockhash}}" style="margin-left: 8px;">{{tx.blockheight}}</a>
            </div>
            <div data-ng-show="tx.blocktime">
              <span style="color: #6c757d;"><strong translate>Timestamp:</strong></span>
              <span style="margin-left: 8px;">{{tx.blocktime * 1000|date:'medium'}}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Compact Info Grid -->
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2px; margin-bottom: 2px;">
        <div style="background: #fff; border: 1px solid #e7eaf3; border-radius: 4px; padding: 4px;">
          <div style="color: #6c757d; font-size: 12px; margin-bottom: 2px;" translate>Value</div>
          <div style="font-size: 16px; font-weight: 600;">{{$root.currency.getConvertion(tx.valueOut)}}</div>
        </div>
        <div style="background: #fff; border: 1px solid #e7eaf3; border-radius: 4px; padding: 8px;" data-ng-show="tx.fees">
          <div style="color: #6c757d; font-size: 12px; margin-bottom: 4px;" translate>Transaction Fee</div>
          <div style="font-size: 16px; font-weight: 600;">{{$root.currency.getConvertion(tx.fees)}}</div>
        </div>
        <div style="background: #fff; border: 1px solid #e7eaf3; border-radius: 4px; padding: 8px;">
          <div style="color: #6c757d; font-size: 12px; margin-bottom: 4px;" translate>Size</div>
          <div style="font-size: 16px; font-weight: 600;">{{tx.size}} bytes</div>
        </div>
        <div style="background: #fff; border: 1px solid #e7eaf3; border-radius: 4px; padding: 8px;" data-ng-show="tx.fees">
          <div style="color: #6c757d; font-size: 12px; margin-bottom: 4px;" translate>Fee Rate</div>
          <div style="font-size: 16px; font-weight: 600;">{{$root.currency.getConvertion((tx.fees * 1000) / tx.size)}} / kB</div>
        </div>
      </div>

      <!-- Inputs/Outputs Tables -->
      <div data-ng-include src="'views/transaction/tx.html'"></div>
    </div>
  </div>
</section>
